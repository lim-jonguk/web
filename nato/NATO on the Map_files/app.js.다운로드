(function(){if(window&&window.addEventListener){var e=Object.create(null),m,t,d=function(){clearTimeout(t);t=setTimeout(m,100)},q=function(){},u=function(){var f;window.addEventListener("resize",d,!1);window.addEventListener("orientationchange",d,!1);window.MutationObserver?(f=new MutationObserver(d),f.observe(document.documentElement,{childList:!0,subtree:!0,attributes:!0}),q=function(){try{f.disconnect(),window.removeEventListener("resize",d,!1),window.removeEventListener("orientationchange",d,
!1)}catch(n){}}):(document.documentElement.addEventListener("DOMSubtreeModified",d,!1),q=function(){document.documentElement.removeEventListener("DOMSubtreeModified",d,!1);window.removeEventListener("resize",d,!1);window.removeEventListener("orientationchange",d,!1)})},v=function(f){function e(a){var c;void 0!==a.protocol?c=a:(c=document.createElement("a"),c.href=a);return c.protocol.replace(/:/g,"")+c.host}var d,p;window.XMLHttpRequest&&(d=new XMLHttpRequest,p=e(location),f=e(f),d=void 0===d.withCredentials&&
""!==f&&f!==p?XDomainRequest||void 0:XMLHttpRequest);return d};m=function(){function d(){--r;0===r&&(q(),u())}function n(a){return function(){!0!==e[a.base]&&(a.isXlink?a.useEl.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href","#"+a.hash):a.useEl.setAttribute("href","#"+a.hash))}}function m(a){return function(){var c=document.body,b=document.createElement("x");a.onload=null;b.innerHTML=a.responseText;if(b=b.getElementsByTagName("svg")[0])b.setAttribute("aria-hidden","true"),b.style.position=
"absolute",b.style.width=0,b.style.height=0,b.style.overflow="hidden",c.insertBefore(b,c.firstChild);d()}}function p(a){return function(){a.onerror=null;a.ontimeout=null;d()}}var a,c,g,h,r=0,b,l=!1,k;q();k=document.getElementsByTagName("use");for(h=0;h<k.length;h+=1){try{c=k[h].getBoundingClientRect()}catch(w){c=!1}(a=k[h].getAttribute("href"))?l=!1:(a=k[h].getAttributeNS("http://www.w3.org/1999/xlink","href"),l=!0);g=a&&a.split?a.split("#"):["",""];a=g[0];g=g[1];b=c&&0===c.left&&0===c.right&&0===
c.top&&0===c.bottom;c&&0===c.width&&0===c.height&&!b?(a.length||!g||document.getElementById(g)||(a=""),a.length&&(b=e[a],!0!==b&&setTimeout(n({useEl:k[h],base:a,hash:g,isXlink:l}),0),void 0===b&&(l=v(a),void 0!==l&&(b=new l,e[a]=b,b.onload=m(b),b.onerror=p(b),b.ontimeout=p(b),b.open("GET",a),b.send(),r+=1)))):b?a.length&&e[a]&&setTimeout(n({useEl:k[h],base:a,hash:g,isXlink:l}),0):void 0===e[a]?e[a]=!0:e[a].onload&&(e[a].abort(),delete e[a].onload,e[a]=!0)}k="";r+=1;d()};window.addEventListener("load",
function n(){window.removeEventListener("load",n,!1);t=setTimeout(m,0)},!1)}})();

!function(e){function t(){}function n(e,t){return function(){e.apply(t,arguments)}}function o(e){if("object"!=typeof this)throw new TypeError("Promises must be constructed via new");if("function"!=typeof e)throw new TypeError("not a function");this._state=0,this._handled=!1,this._value=void 0,this._deferreds=[],s(e,this)}function i(e,t){for(;3===e._state;)e=e._value;return 0===e._state?void e._deferreds.push(t):(e._handled=!0,void a(function(){var n=1===e._state?t.onFulfilled:t.onRejected;if(null===n)return void(1===e._state?r:f)(t.promise,e._value);var o;try{o=n(e._value)}catch(i){return void f(t.promise,i)}r(t.promise,o)}))}function r(e,t){try{if(t===e)throw new TypeError("A promise cannot be resolved with itself.");if(t&&("object"==typeof t||"function"==typeof t)){var i=t.then;if(t instanceof o)return e._state=3,e._value=t,void u(e);if("function"==typeof i)return void s(n(i,t),e)}e._state=1,e._value=t,u(e)}catch(r){f(e,r)}}function f(e,t){e._state=2,e._value=t,u(e)}function u(e){2===e._state&&0===e._deferreds.length&&setTimeout(function(){e._handled||d(e._value)},1);for(var t=0,n=e._deferreds.length;n>t;t++)i(e,e._deferreds[t]);e._deferreds=null}function c(e,t,n){this.onFulfilled="function"==typeof e?e:null,this.onRejected="function"==typeof t?t:null,this.promise=n}function s(e,t){var n=!1;try{e(function(e){n||(n=!0,r(t,e))},function(e){n||(n=!0,f(t,e))})}catch(o){if(n)return;n=!0,f(t,o)}}var l=setTimeout,a="function"==typeof setImmediate&&setImmediate||function(e){l(e,1)},d=function(e){"undefined"!=typeof console&&console&&console.warn("Possible Unhandled Promise Rejection:",e)};o.prototype["catch"]=function(e){return this.then(null,e)},o.prototype.then=function(e,n){var r=new o(t);return i(this,new c(e,n,r)),r},o.all=function(e){var t=Array.prototype.slice.call(e);return new o(function(e,n){function o(r,f){try{if(f&&("object"==typeof f||"function"==typeof f)){var u=f.then;if("function"==typeof u)return void u.call(f,function(e){o(r,e)},n)}t[r]=f,0===--i&&e(t)}catch(c){n(c)}}if(0===t.length)return e([]);for(var i=t.length,r=0;r<t.length;r++)o(r,t[r])})},o.resolve=function(e){return e&&"object"==typeof e&&e.constructor===o?e:new o(function(t){t(e)})},o.reject=function(e){return new o(function(t,n){n(e)})},o.race=function(e){return new o(function(t,n){for(var o=0,i=e.length;i>o;o++)e[o].then(t,n)})},o._setImmediateFn=function(e){a=e},o._setUnhandledRejectionFn=function(e){d=e},"undefined"!=typeof module&&module.exports?module.exports=o:e.Promise||(e.Promise=o)}(this);
!function(t){"use strict";var e,r,i,o,n,s,a;function h(t){if("string"!=typeof t&&(t=String(t)),/[^a-z0-9\-#$%&'*+.\^_`|~]/i.test(t))throw new TypeError("Invalid character in header field name");return t.toLowerCase()}function u(t){return"string"!=typeof t&&(t=String(t)),t}function d(e){var t={next:function(){var t=e.shift();return{done:void 0===t,value:t}}};return r&&(t[Symbol.iterator]=function(){return t}),t}function p(e){this.map={},e instanceof p?e.forEach(function(t,e){this.append(e,t)},this):e&&Object.getOwnPropertyNames(e).forEach(function(t){this.append(t,e[t])},this)}function f(t){if(t.bodyUsed)return Promise.reject(new TypeError("Already read"));t.bodyUsed=!0}function c(r){return new Promise(function(t,e){r.onload=function(){t(r.result)},r.onerror=function(){e(r.error)}})}function l(t){var e=new FileReader;return e.readAsArrayBuffer(t),c(e)}function y(){return this.bodyUsed=!1,this._initBody=function(t){if("string"==typeof(this._bodyInit=t))this._bodyText=t;else if(i&&Blob.prototype.isPrototypeOf(t))this._bodyBlob=t;else if(o&&FormData.prototype.isPrototypeOf(t))this._bodyFormData=t;else if(e&&URLSearchParams.prototype.isPrototypeOf(t))this._bodyText=t.toString();else if(t){if(!n||!ArrayBuffer.prototype.isPrototypeOf(t))throw new Error("unsupported BodyInit type")}else this._bodyText="";this.headers.get("content-type")||("string"==typeof t?this.headers.set("content-type","text/plain;charset=UTF-8"):this._bodyBlob&&this._bodyBlob.type?this.headers.set("content-type",this._bodyBlob.type):e&&URLSearchParams.prototype.isPrototypeOf(t)&&this.headers.set("content-type","application/x-www-form-urlencoded;charset=UTF-8"))},i?(this.blob=function(){var t=f(this);if(t)return t;if(this._bodyBlob)return Promise.resolve(this._bodyBlob);if(this._bodyFormData)throw new Error("could not read FormData body as blob");return Promise.resolve(new Blob([this._bodyText]))},this.arrayBuffer=function(){return this.blob().then(l)},this.text=function(){var t,e=f(this);if(e)return e;if(this._bodyBlob)return t=this._bodyBlob,(e=new FileReader).readAsText(t),c(e);if(this._bodyFormData)throw new Error("could not read FormData body as text");return Promise.resolve(this._bodyText)}):this.text=function(){var t=f(this);return t||Promise.resolve(this._bodyText)},o&&(this.formData=function(){return this.text().then(b)}),this.json=function(){return this.text().then(JSON.parse)},this}function m(t,e){var r,o=(e=e||{}).body;if(m.prototype.isPrototypeOf(t)){if(t.bodyUsed)throw new TypeError("Already read");this.url=t.url,this.credentials=t.credentials,e.headers||(this.headers=new p(t.headers)),this.method=t.method,this.mode=t.mode,o||(o=t._bodyInit,t.bodyUsed=!0)}else this.url=t;if(this.credentials=e.credentials||this.credentials||"omit",!e.headers&&this.headers||(this.headers=new p(e.headers)),this.method=(r=e.method||this.method||"GET",t=r.toUpperCase(),-1<s.indexOf(t)?t:r),this.mode=e.mode||this.mode||null,this.referrer=null,("GET"===this.method||"HEAD"===this.method)&&o)throw new TypeError("Body not allowed for GET or HEAD requests");this._initBody(o)}function b(t){var r=new FormData;return t.trim().split("&").forEach(function(t){var e;t&&(t=(e=t.split("=")).shift().replace(/\+/g," "),e=e.join("=").replace(/\+/g," "),r.append(decodeURIComponent(t),decodeURIComponent(e)))}),r}function w(t,e){e=e||{},this.type="default",this.status=e.status,this.ok=200<=this.status&&this.status<300,this.statusText=e.statusText,this.headers=e.headers instanceof p?e.headers:new p(e.headers),this.url=e.url||"",this._initBody(t)}t.fetch||(e="URLSearchParams"in t,r="Symbol"in t&&"iterator"in Symbol,i="FileReader"in t&&"Blob"in t&&function(){try{return new Blob,!0}catch(t){return!1}}(),o="FormData"in t,n="ArrayBuffer"in t,p.prototype.append=function(t,e){t=h(t),e=u(e);var r=this.map[t];r||(r=[],this.map[t]=r),r.push(e)},p.prototype.delete=function(t){delete this.map[h(t)]},p.prototype.get=function(t){t=this.map[h(t)];return t?t[0]:null},p.prototype.getAll=function(t){return this.map[h(t)]||[]},p.prototype.has=function(t){return this.map.hasOwnProperty(h(t))},p.prototype.set=function(t,e){this.map[h(t)]=[u(e)]},p.prototype.forEach=function(r,o){Object.getOwnPropertyNames(this.map).forEach(function(e){this.map[e].forEach(function(t){r.call(o,t,e,this)},this)},this)},p.prototype.keys=function(){var r=[];return this.forEach(function(t,e){r.push(e)}),d(r)},p.prototype.values=function(){var e=[];return this.forEach(function(t){e.push(t)}),d(e)},p.prototype.entries=function(){var r=[];return this.forEach(function(t,e){r.push([e,t])}),d(r)},r&&(p.prototype[Symbol.iterator]=p.prototype.entries),s=["DELETE","GET","HEAD","OPTIONS","POST","PUT"],m.prototype.clone=function(){return new m(this)},y.call(m.prototype),y.call(w.prototype),w.prototype.clone=function(){return new w(this._bodyInit,{status:this.status,statusText:this.statusText,headers:new p(this.headers),url:this.url})},w.error=function(){var t=new w(null,{status:0,statusText:""});return t.type="error",t},a=[301,302,303,307,308],w.redirect=function(t,e){if(-1===a.indexOf(e))throw new RangeError("Invalid status code");return new w(null,{status:e,headers:{location:t}})},t.Headers=p,t.Request=m,t.Response=w,t.fetch=function(r,s){return new Promise(function(o,t){var e=m.prototype.isPrototypeOf(r)&&!s?r:new m(r,s),n=new XMLHttpRequest;n.onload=function(){var r,t={status:n.status,statusText:n.statusText,headers:(e=n,r=new p,(e.getAllResponseHeaders()||"").trim().split("\n").forEach(function(t){var e=t.trim().split(":"),t=e.shift().trim(),e=e.join(":").trim();r.append(t,e)}),r),url:"responseURL"in n?n.responseURL:/^X-Request-URL:/m.test(n.getAllResponseHeaders())?n.getResponseHeader("X-Request-URL"):void 0},e="response"in n?n.response:n.responseText;o(new w(e,t))},n.onerror=function(){t(new TypeError("Network request failed"))},n.ontimeout=function(){t(new TypeError("Network request failed"))},n.open(e.method,e.url,!0),"include"===e.credentials&&(n.withCredentials=!0),"responseType"in n&&i&&(n.responseType="blob"),e.headers.forEach(function(t,e){n.setRequestHeader(e,t)}),n.send(void 0===e._bodyInit?null:e._bodyInit)})},t.fetch.polyfill=!0)}("undefined"!=typeof self?self:this);
!function(e){"use strict";var t=e.NatoApplication,r=e.document,n=e.history,o=e.location;function i(){return n&&n.state?n.state:(o.hash||"#").slice(1).split("&").reduce(function(e,t){t=/^([^=]+)(?:=(.+))?$/.exec(t);return t&&(e[decodeURIComponent(t[1])]=decodeURIComponent(t[2]||"")),e},{})}function l(a){var e=Object.keys(a).map(function(e){var t=a[e];return e+(null!=t&&""!==t?"="+encodeURIComponent(t):"")}).join("&");n?n.replaceState(a,r.title,o.origin+o.pathname+o.search+"#"+e):o.hash=e}t.Fragment={getParameters:i,saveParameters:l,setParameter:function(e,t){var a=i();a[e]=t,l(a)},deleteParameter:function(e){var t=i();delete t[e],l(t)}},t.initialParameters=i(),console.log("before",t.initialParameters),console.log('{"layer": "1", "layer-1": "1"}'),t.initialParameters.layer||(t.initialParameters=JSON.parse('{"layer": "1", "layer-1": "1"}')),console.log("after",t.initialParameters)}(window);
!function(){var t,e,n=window.NatoApplication,a=n.initialParameters;function r(e){return document.querySelector(e)}"lang"in a||((navigator.languages||[navigator.language||navigator.userLanguage||navigator.systemLanguage]).some(function(e){e=/^en|fr/.exec(e);return e&&(t=e[0])}),a.lang=t||"en"),""!=document.referrer&&0<=document.referrer.indexOf("www.nato.int/cps/fr")&&(a.lang="fr",n.Fragment.setParameter("lang",a.lang)),"en"!==a.lang&&((e=r("body")).classList.remove("en"),e.classList.add("fr"));var o={};function s(e){return"Assets/img/share-icon.jpg"===e&&document.querySelector("body.fr")?"Assets/img/share-icon-fr.jpg":o[e]||e}function c(){r('a[href="#about"]').textContent=s("about");var e=r('a[href="#lang=en"]'),t=r('a[href="#lang=fr"]');"fr"===a.lang&&(t.classList.add("selected"),e.classList.remove("selected")),r("#welcome-screen")&&(r("#welcome-screen p").textContent=n.config.splash[a.lang].splash,r("#welcome-cta").textContent=s("launch-map")),r("#home-screen")&&(r("#home-screen p").innerHTML=s("home-screen")),r("#fly-home-button").textContent=s("reset-map"),r("#map-share").textContent=s("share-map"),r("#app-title").textContent=document.title=s("title");e=r("#active-layer-panel .title");e&&(e.textContent=s("active-layer")+":"),r('meta[property="og:description"]').content=s("og-description")}n.Internationalization={t:s,switchTo:function(t,e){o=e,c(),["en","fr"].forEach(function(e){e===t?(r('a[href="#lang='+e+'"]').classList.add("selected"),document.body.classList.add(e)):(r('a[href="#lang='+e+'"]').classList.remove("selected"),document.body.classList.remove(e))})},init:function(e){o=e,c()}}}();
function onYouTubeIframeAPIReady(){let e=new MutationObserver(checkYoutubeIframes);console.log("onYoutubeframeApi ready"),e.observe(document.getElementById("panel-container"),{attributes:!1,childList:!0,characterData:!1})}function checkYoutubeIframes(){setTimeout(function(){var e=document.querySelectorAll('iframe[src^="https://www.youtube.com/embed/"]');console.log("checkYoutubeIframes 3",e);for(var i=[],t=0;t<e.length;t++){var s=e[t];s.id||(s.id="embeddedvideoiframe"+t,s=new YT.Player(s.id,{events:{onStateChange:function(e){if(e.data==YT.PlayerState.PLAYING)for(var t=0;t<i.length;t++){var s=i[t];s.getPlayerState()==YT.PlayerState.PLAYING&&s.getIframe().id!=e.target.getIframe().id&&s.pauseVideo()}}}}),i.push(s))}},1e3)}!function(){"use strict";var o=window.NatoApplication.Internationalization.t,e=document.createElement("script");e.src="//www.youtube.com/iframe_api";var t=document.getElementsByTagName("script")[0];function s(e){return document.querySelector(e)}function a(e){return(e||"").trim().split("\n").map(function(e){for(var t,s=/(http(?:s?):\/\/)?(?:[\dA-Za-z][\dA-Za-z\-]{0,62}\.)+[A-Za-z]{2,4}\/?/g,i=[],n=0;t=s.exec(e);)i.push(e.slice(n,t.index)),i.push(c("a",{target:"_blank",href:t[1]?t[0]:"http://"+t[0]},t[0])),n=t.index+t[0].length;return i.push(e.slice(n)),c("p",i)})}function c(e,t,s){e=document.createElement(e);return"string"==typeof t||t instanceof Array?s=t:function s(i,n){Object.keys(n).forEach(function(e){var t=n[e];"attributes"===e?Object.keys(n.attributes).forEach(function(e){i.setAttribute(e,t[e])}):"function"==typeof t?i.addEventListener(e,t,!1):"object"==typeof t?s(i[e],t):i[e]=t})}(e,t),function t(s,e){"string"==typeof e?/<(?=.*? .*?\/ ?>|br|hr|input|!--|wbr)[a-z]+.*?>|<([a-z]+).*?<\/\1>/i.test(e)&&"textarea"!=s.type?s.innerHTML=e:s.appendChild(document.createTextNode(e)):e instanceof Array?e.forEach(function(e){t(s,e)}):e&&s.appendChild(e)}(e,s),e}function l(e,t){return e&&0<e.length?c("div",{className:"related-articles"},[c("h3",t),e.map(function(e){return c("a",{href:e.url,target:"_blank"},'<svg class="icon-bd icon-right-arrow"><use xlink:href="Assets/img/symbol-defs.svg#icon-right-arrow"></use></svg>'+e.tag)})]):null}function r(e,t){var s=encodeURIComponent(window.location.protocol+"//"+window.location.host);return e&&0<e.length?c("div",{className:"related-videos"},[c("h3",t),e.map(function(e){return c("div",{className:"related-video"},[c("a",{href:"https://www.youtube.com/watch?v="+e.videoid,target:"_blank"},e.tag),c("iframe",{attributes:{width:"100%",height:window.NatoApplication.mobile?9*(window.innerWidth-40)/16:window.innerWidth<=1024?152:197,src:"https://www.youtube.com/embed/"+e.videoid+"?showinfo=0&playsinline=0&enablejsapi=1&origin="+s,frameborder:0,allowfullscreen:"allowfullscreen"}},[])])})]):null}function i(t,s){return Object.getOwnPropertyNames(s.prototype).filter(function(e){return!(e in t.prototype)}).forEach(function(e){Object.defineProperty(t.prototype,e,Object.getOwnPropertyDescriptor(s.prototype,e))}),t}function d(e){this.element=e,this.eventListeners={}}function n(e){d.call(this,s(e))}function p(e){var t=this.legend=c("span",{className:"legend"},e.title),s=c("span",{className:"info",click:this.info.bind(this)},'<svg class="icon-bd icon-info"><use xlink:href="Assets/img/symbol-defs.svg#icon-info"></use></svg>'),i=c("img",{src:"Content/files/"+e.icon}),n=new XMLHttpRequest;n.open("GET","Content/files/"+e.icon),n.send(),n.onreadystatechange=function(){n.readyState===XMLHttpRequest.DONE&&200===n.status&&(i.outerHTML=n.responseText)},d.call(this,c("span",{className:"filter",click:this.toggle.bind(this)},[i,t,s]))}function u(){d.call(this,c("div",{className:"active-layer"},[c("div",{className:"title"},o("active-layer")+":"),c("div",{id:"active-layer-list"})]))}function m(e,t){d.call(this,t),this.id=e}function h(e,t,s,i){var n="title"in t?t.title:t.name;return c("div",{className:"header"},[i?c("button",{type:"button",className:"back-button",click:function(){s(),i()}},'<svg class="icon-bd icon-left-arrow"><use xlink:href="Assets/img/symbol-defs.svg#icon-left-arrow"></use></svg>'):null,c("button",{type:"button",className:"print-button",click:function(){window.ga("send","event","print","click",n,0),print()}},'<svg class="icon-bd icon-print"><use xlink:href="Assets/img/symbol-defs.svg#icon-print"></use></svg>'),x(t),k(t),c("button",{type:"button",className:"close-button",click:s},"<span>"+o("close")+'</span> <svg class="icon-bd icon-close"><use xlink:href="Assets/img/symbol-defs.svg#icon-close"></use></svg>')])}function f(e,t,s){var i=this,t=c("div",{className:"country-infobox infobox"},[h(0,t,this.close.bind(this),s),c("div",{className:"infobox-wrapper"},[c("div",{className:"country-header"},[c("img",{className:"country-flag",src:"Content/files/"+t.flag}),c("span",{className:"country-name"},t.name)]),c("div",{className:"info"},[c("div",{},[c("span",o("capital")),c("span",t.capital)]),c("div",{},[c("span",o("date-accession")),c("span",t.joined)])]),c("dl",{className:"activities"},[c("dt",o("contribution-funding")),c("dd",a(t.spending)),c("dt",o("contribution-operations")),c("dd",a(t.activities))]),0<t.background.length?c("div",{className:"description"},[t.background.map(function(s){return c("a",{href:"#",click:function(e){e.preventDefault();var t=i.element.parentNode;i.child=new y(s,function(){i.emit("replaced"),setTimeout(function(){t.replaceChild(i.element,i.child.element),i.child=null},200)}),i.child.on("closed",function(){i.child.element.classList.add("close"),i.close()}),i.emit("replaced"),setTimeout(function(){t.replaceChild(i.child.element,i.element)},200)}},'<svg class="icon-bd icon-right-arrow"><use xlink:href="Assets/img/symbol-defs.svg#icon-right-arrow"></use></svg>'+s.link_text)})]):"",r(t.videos,o("related-videos")),l(t.links,o("other-stories")),c("a",{href:t.url,target:"_blank"},'<svg class="icon-bd icon-right-arrow"><use xlink:href="Assets/img/symbol-defs.svg#icon-right-arrow"></use></svg>'+t.urlTag)])]);m.call(this,e,t),checkYoutubeIframes()}function v(e,t,s){t=c("div",{className:"country-infobox infobox"},[h(0,t,this.close.bind(this),s),c("div",{className:"infobox-wrapper"},[c("div",{className:"country-header"},[c("img",{className:"country-flag",src:"Content/files/"+t.flag}),c("span",{className:"country-name"},t.name)]),c("div",{className:"info"},[c("div",{},[c("span",o("capital")),c("span",t.capital)]),t.partnership?c("div",{},[c("span",o("type-of-partnership")),c("span",t.partnership)]):null]),c("div",{className:"activities"},[a(t.activities),c("a",{href:t.url,target:"_blank"},'<svg class="icon-bd icon-right-arrow"><use xlink:href="Assets/img/symbol-defs.svg#icon-right-arrow"></use></svg>'+t.urlTag)]),r(t.videos,o("related-videos")),l(t.links,o("other-stories"))])]);m.call(this,e,t)}function b(e,t,s){var i=this,n=this.close.bind(this);i.child=null,m.call(this,e,c("div",{className:"infobox feature-infobox"},[h(0,t,n,s),c("div",{className:"infobox-wrapper"},[c("div",{className:"title"},[c("h2",t.title),t.video?c("iframe",{attributes:{width:378,height:215,src:"https://www.youtube.com/embed/"+t.video,frameborder:0,allowfullscreen:"allowfulscreen"}},[]):t.image?c("div",{className:"img-wrapper"},[c("img",{src:"Content/files/"+t.image,alt:t.image_title,title:t.image_title},[])]):null,t.video?c("a",{href:"https://youtu.be/"+t.video,className:"video-link",target:"_blank"},t.videoDescription||"https://youtu.be/"+t.video):null]),0<t.background.length?c("div",{className:"description"},[a(t.description).concat(t.background.map(function(s){return c("a",{href:"#",click:function(e){e.preventDefault();var t=i.element.parentNode;i.child=new y(s,function(){i.emit("replaced"),setTimeout(function(){t.replaceChild(i.element,i.child.element),i.child=null},200)}),i.child.on("closed",function(){i.child.element.classList.add("close"),i.close()}),i.emit("replaced"),setTimeout(function(){t.replaceChild(i.child.element,i.element)},200)}},'<svg class="icon-bd icon-right-arrow"><use xlink:href="Assets/img/symbol-defs.svg#icon-right-arrow"></use></svg>'+s.link_text)}))]):t.description?c("div",{className:"description"},t.description):"",r(t.videos,o("related-videos")),l(t.links,o("other-stories")),c("div",{className:"info"},[c("div",{},[c("h3",o("location")),c("p",t.location)]),t.url?c("div",{},[c("h3",o("website")),c("p",{},c("a",{href:t.website,target:"_blank"},t.url))]):null])])]))}function g(e,t,s){var i=a(t.body);"trust-fund"!=window.NatoApplication.mapId&&"sps"!=window.NatoApplication.mapId||(i=t.body),m.call(this,e,c("div",{className:"infobox about-infobox"},[c("div",{className:"header"},[c("h2",t.title),c("button",{type:"button",click:this.close.bind(this),className:"close-button"},"<span>"+o("close")+'</span> <svg class="icon-bd icon-close"><use xlink:href="Assets/img/symbol-defs.svg#icon-close"></use></svg>')]),c("div",{className:"infobox-wrapper"},[c("div",{className:"description"},i),c("a",{href:"#",click:function(e){e.preventDefault(),s()}},'<svg class="icon-bd icon-right-arrow"><use xlink:href="Assets/img/symbol-defs.svg#icon-right-arrow"></use></svg>'+t.toggle)])]))}function w(e,s){var i=this.close.bind(this);m.call(this,"select-infobox",c("div",{className:"infobox select-infobox"},[c("div",{className:"header"},[c("button",{type:"button",click:i,className:"close-button"},"<span>"+o("close")+'</span> <svg class="icon-bd icon-close"><use xlink:href="Assets/img/symbol-defs.svg#icon-close"></use></svg>')]),c("div",{className:"infobox-wrapper"},[c("div",{},[c("h2",{},o("explore-articles")),c("ul",{},e.map(function(t){return c("li",{},[c("a",{href:"#"+t.id,click:function(e){e.preventDefault(),i(),setTimeout(function(){s(t.id)},200)}},'<svg class="icon-bd icon-right-arrow"><use xlink:href="Assets/img/symbol-defs.svg#icon-right-arrow"></use></svg>'+t.name)])}))])])]))}function y(e,t){var s=this.close.bind(this);m.call(this,"background-infobox-"+e.id,c("div",{className:"infobox background-infobox"},[c("div",{className:"header"},[c("button",{type:"button",className:"back-button",click:t},'<svg class="icon-bd icon-left-arrow"><use xlink:href="Assets/img/symbol-defs.svg#icon-left-arrow"></use></svg>'),c("button",{type:"button",className:"close-button",click:s},"<span>"+o("close")+'</span> <svg class="icon-bd icon-close"><use xlink:href="Assets/img/symbol-defs.svg#icon-close"></use></svg>')]),c("div",{className:"infobox-wrapper"},[c("div",{className:"description"},[c("h3",a(e.title)),a(e.description)])])]))}function N(e){var t=o("og-description");return"main"!=window.NatoApplication.mapId&&(t=document.getElementsByTagName("meta").description.content,"fr"==window.NatoApplication.getCurrentLang()&&"sps"==window.NatoApplication.mapId&&(t="twitter"==e?"Utilisez cette carte interactive pour en savoir plus sur le programme SPS de l’OTAN":"Utilisez cette carte interactive pour en savoir plus sur le programme OTAN pour la science au service de la paix et de la sécurité")),t}function x(e){var t=N(),s={u:e?window.location.href:window.location.origin+window.location.pathname,title:o("title"),description:t,picture:window.location.origin+window.location.pathname+o("Assets/img/share-icon.jpg"),caption:"nato.int"};return c("a",{href:"https://www.facebook.com/sharer/sharer.php?"+Object.keys(s).map(function(e){return e+"="+encodeURIComponent(s[e])},{}).join("&"),className:"facebook-share",target:"_blank"},'<svg class="icon-bd icon-facebook"><use xlink:href="Assets/img/symbol-defs.svg#icon-facebook"></use></svg>')}function k(e){var t={text:N("twitter"),url:e?window.location.href:window.location.origin+window.location.pathname};return c("a",{href:"https://twitter.com/share?"+Object.keys(t).map(function(e){return e+"="+encodeURIComponent(t[e])},{}).join("&"),className:"twitter-share",target:"_blank"},'<svg class="icon-bd icon-twitter"><use xlink:href="Assets/img/symbol-defs.svg#icon-twitter"></use></svg>')}function A(){var e=window.location.origin+window.location.pathname,t=N(),s=c("textarea",{attributes:{readonly:!0}},"\x3c!-- "+o("embed-share")+' --\x3e\n<a href="'+e+'"><div style="max-width: 300px; display: inline-block;"><img src="'+e+o("Assets/img/share-icon.jpg")+'" /><br /><span>'+t+"<span></a>"),t=this.close.bind(this);m.call(this,"share-infobox",c("div",{className:"infobox share-infobox map-share"},[c("div",{className:"header"},[c("h2",o("share-map")),c("button",{type:"button",className:"close-button",click:t},"<span>"+o("close")+'</span> <svg class="icon-bd icon-close"><use xlink:href="Assets/img/symbol-defs.svg#icon-close"></use></svg>')]),c("div",{className:"infobox-wrapper"},[c("ul",{className:"share-options"},[c("li",{},[x()]),c("li",{},[k()]),c("li",{className:"direct-share"},[c("h4",{},o("embed-button")),c("div",{},c("img",{src:o("Assets/img/share-icon.jpg")})),s,c("div",{},c("button",{className:"copy-to-clipboard",click:function(){s.select(),document.execCommand("copy")}},o("copy-to-clipboard")))])])])]))}function L(e){var t=c("img",{src:"Content/files/"+e.icon}),s=new XMLHttpRequest;s.open("GET","Content/files/"+e.icon),s.send(),s.onreadystatechange=function(){s.readyState===XMLHttpRequest.DONE&&200===s.status&&(t.outerHTML=s.responseText)},d.call(this,c("aside",{className:"infopanel"},[window.NatoApplication.mobile?c("div",{className:"infopanel-back-button"},[c("button",{type:"button",className:"back-button",click:this.infoclose.bind(this)},'<svg class="icon-bd icon-left-arrow"><use xlink:href="Assets/img/symbol-defs.svg#icon-left-arrow"></use></svg><span>'+o("back")+"</span>")]):null,c("div",{className:"infopanel-wrapper"},[c("div",{className:"title"},[t,e.title]),c("div",{className:"description"},a(e.description))])]))}function C(e,t,s){var i=this;d.call(this,c("div",{className:"modal-container"},[c("div",{className:"modal-shadow"},[c("div",{className:"modal"},[a(e),t&&c("div",{className:"modal-buttons"},[c("button",{type:"button",click:function(){i.emit("accepted")}},t),s&&c("button",{type:"button",click:function(){i.emit("rejected")}},s)])])])]))}t.parentNode.insertBefore(e,t),d.prototype.on=function(e,t){this.eventListeners[e]=this.eventListeners[e]||[],this.eventListeners[e].push(t)},d.prototype.emit=function(e){(this.eventListeners[e]||[]).forEach(function(e){e()})},d.prototype.attach=function(e){e.appendChild(this.element)},d.prototype.dettach=function(){this.element.parentNode&&this.element.parentNode.removeChild(this.element)},d.prototype.replaceWith=function(e){this.element.parentNode&&this.element.parentNode.replaceChild(e.element,this.element)},n.prototype.collapse=function(){this.element.classList.remove("expanded"),this.element.parentNode.classList.remove("expanded")},n.prototype.expand=function(){this.element.classList.add("expanded"),this.element.parentNode.classList.add("expanded")},n.prototype.close=function(){this.element.classList.remove("expanded"),this.element.parentNode.classList.remove("expanded")},n.prototype.toggle=function(){this.element.classList.contains("expanded")?(this.element.classList.remove("expanded"),this.element.parentNode.classList.remove("expanded")):(this.element.classList.add("expanded"),this.element.parentNode.classList.add("expanded"))},i(n,d),i(p,d),p.prototype.selected=function(){return this.element.classList.contains("selected")},p.prototype.select=function(){this.element.classList.add("selected"),this.emit("selected")},p.prototype.unselect=function(){this.element.classList.contains("selected")&&(this.element.classList.remove("selected"),this.emit("unselected"))},p.prototype.toggle=function(){return this.selected()?this.unselect():this.select()},p.prototype.info=function(e){e.stopPropagation(),this.emit("info")},p.prototype.setText=function(e){this.legend.textContent=e},i(u,d),u.prototype.addLayers=function(e){var t=s("#active-layer-list");t&&(t.innerHTML="",e.forEach(function(e){t.appendChild(c("span",{},e))}))},i(m,d),m.prototype.close=function(){this.emit("closed")},m.prototype.replaceWith=function(e){var t=this;this.emit("replaced"),setTimeout(function(){d.prototype.replaceWith.call(t,e)},200)},i(f,m),i(v,m),i(b,m),b.prototype.close=function(){m.prototype.close.call(this)},b.prototype.replaceWith=function(e){this.child?this.child.replaceWith(e):m.prototype.replaceWith.call(this,e)},i(g,m),i(w,m),i(y,m),i(function(e,t){var s=this.close.bind(this);m.call(this,"share-infobox",c("div",{className:"infobox share-infobox"},[c("div",{className:"header"},[c("button",{type:"button",className:"back-button",click:t},'<svg class="icon-bd icon-left-arrow"><use xlink:href="Assets/img/symbol-defs.svg#icon-left-arrow"></use></svg>'),c("button",{type:"button",className:"close-button",click:s},"<span>"+o("close")+'</span> <svg class="icon-bd icon-close"><use xlink:href="Assets/img/symbol-defs.svg#icon-close"></use></svg>')]),c("div",{className:"infobox-wrapper"},[c("ul",{className:"share-options"},[c("li",{},[x(e)]),c("li",{},[k(e)])])])]))},m),i(A,m),i(L,d),L.prototype.infoclose=function(e){e.stopPropagation(),this.emit("infoclose")},i(C,d),C.prototype.show=function(){this.attach(document.body)};t={Panel:n,LayerComponent:p,ActiveLayerComponent:u,AboutInfoBox:g,FeatureInfoBox:b,PanelInfo:L,ShareMapBox:A,SelectInfoBox:w,MemberInfoBox:f,PartnerInfoBox:v,Modal:C,h:c};window.NatoApplication=window.NatoApplication||{},window.NatoApplication.Components=t}();
!function(){"use strict";var r,e,s=window.google,a={lat:50.839037,lng:4.373327},o=Math.PI/180;function p(t){return t*o}function t(t,e){var i=e.mapProvider;this.container=t;e={getTileUrl:function(t,e){var o,n,t=(n=e,t=(o=t).y,o=o.x,n=1<<n,t<0||n<=t?null:((o<0||n<=o)&&(o=(o%n+n)%n),{x:o,y:t}));return t?i+"/tile/"+e+"/"+t.y+"/"+t.x:null},tileSize:new s.maps.Size(256,256),isPng:!0,maxZoom:6,minZoom:3,zoomControl:!1,scrollwheel:!1,disableDoubleClickZoom:!0,draggable:!1,name:"Nato"},e=new s.maps.ImageMapType(e),t=new s.maps.Map(t,{center:a,zoom:4,disableDefaultUI:!0,mapTypeId:s.maps.MapTypeId.HYBRID});t.mapTypes.set("Nato",e),t.setMapTypeId("Nato"),this.gmapsViewer=t,this.eventListeners={},this.dataLayers={},this.layerStyles={},this.pins={},this.geometry=[];var o=this,n=null,e=function(){n&&clearTimeout(n),n=setTimeout(function(){n=null;var t=o.currentPosition();80<t.latitude?(t.latitude=80,o.centerIn(t)):t.latitude<-80?(t.latitude=-80,o.centerIn(t)):o.emit("positionChanged",o.currentPosition())},250)};t.addListener("center_changed",e),t.addListener("zoom_changed",e),r=t.addListener("tilesloaded",l)}function l(){e(),s.maps.event.removeListener(r)}t.prototype.watchLoad=function(){return new Promise(function(t){e=t})},t.prototype.centerIn=function(t){this.gmapsViewer.setCenter({lat:t.latitude,lng:t.longitude}),"zoom"in t&&this.setZoom(t.zoom)},t.prototype.centerInHome=function(){this.gmapsViewer.setCenter(a),this.setZoom(0)},t.prototype.currentPosition=function(){var t=this.gmapsViewer,e=t.getCenter();return{latitude:e.lat(),longitude:e.lng(),zoom:t.getZoom()-4}},t.prototype.setZoom=function(t){this.gmapsViewer.setZoom(t+4)},t.prototype.isMaxZoom=function(){return 6<=this.gmapsViewer.getZoom()},t.prototype.isMinZoom=function(){return this.gmapsViewer.getZoom()<=3},t.prototype.zoomIn=function(){return this.setZoom(this.currentPosition().zoom+1),!(6<=this.gmapsViewer.getZoom())},t.prototype.zoomOut=function(){return this.setZoom(this.currentPosition().zoom-1),!(this.gmapsViewer.getZoom()<=3)},t.prototype.emit=function(t,e){(this.eventListeners[t]||[]).forEach(function(t){t(e)})},t.prototype.on=function(t,e){this.eventListeners[t]=this.eventListeners[t]||[],this.eventListeners[t].push(e)},t.prototype.setGeometry=function(t){this.geometry=t},t.prototype.loadGeoJson=function(t,e,o,n){n=n||"CountryName";var i=this,r=this.dataLayers[t]=new s.maps.Data;return this.layerStyles[t]={strokeColor:"transparent",fillColor:o,opacity:1,fillOpacity:1},new Promise(function(t){r.loadGeoJson(e,{},function(){r.setStyle({strokeColor:"transparent",fillColor:"transparent",opacity:0}),r.addListener("click",function(t){i.emit("countryClicked",t.feature.getProperty(n))}),r.addListener("mouseover",function(t){i.emit("countryHovered",t.feature.getProperty(n))}),r.addListener("mouseout",function(){i.emit("countryHoveredStop")}),r.setMap(i.gmapsViewer),console.log("loaded"),t()})})},t.prototype.setLayerColor=function(t,e){this.dataLayers[t].setStyle({fillColor:e,strokeColor:"transparent",opacity:1})},t.prototype.setLayerStyle=function(e,t){var o,n,i,r=this;this.dataLayers[e]?this.dataLayers[e].setStyle(t):((o=document.querySelector("#loading-screen")).style.display="block",n=this.geometry.filter(function(t){return t.geojson==e}),r.loadGeoJson(n[0].geojson,"./Content/files/"+n[0].geojson,(i=n[0].color,t=.3,"rgba("+/^#([\da-f]{2})([\da-f]{2})([\da-f]{2})$/i.exec(i).slice(1).map(function(t){return parseInt(t,16)}).join(",")+","+t+")"),n[0].property_key).then(function(){r.dataLayers[e].setStyle(r.layerStyles[e]),o.style.display="none"}))},t.prototype.showLayer=function(t){this.setLayerStyle(t,this.layerStyles[t])},t.prototype.hideLayer=function(t){this.setLayerStyle(t,{strokeColor:"transparent",fillColor:"transparent",opacity:0})},t.prototype.addPins=function(e){var o=this;e.forEach(function(i){var t=new s.maps.Marker({position:{lat:i.lat,lng:i.lon},icon:i.icon});(o.pins[i.id]=t).addListener("click",function(){var t=e.filter(function(t){return 0===(o=i,n=p((e=t).lat),t=p(e.lon),e=p(o.lat),o=p(o.lon),t=Math.sin(o-t)*Math.cos(e),n=e-n,Math.sqrt(n*n+t*t));var e,o,n}).map(function(t){return{type:"pin",id:t.id}});1<t.length?o.emit("multipleClicked",t):o.emit("pinClicked",i.id)}),t.setMap(o.gmapsViewer)})},t.prototype.clearPins=function(t){var e=this.pins,o=Object.keys(e);void 0!==t&&(o=o.filter(t)),o.forEach(function(t){e[t].setMap(null),delete e[t]})},t.prototype.setPinIcon=function(t,e){t in this.pins&&this.pins[t].setIcon(e)},t.prototype.destroy=function(){for(var t in this.eventListeners)this.eventListeners[t]=void 0},t.prototype.setPrinting=function(){},t.prototype.unsetPrinting=function(){},window.NatoApplication.GmapsViewer=t}();
!function(){"use strict";var b=window.NatoApplication=window.NatoApplication||{};window.innerWidth<=768?b.mobile=!0:b.mobile=!1;var g=b.defaultPosition={longitude:4.84911701440904,latitude:51.72673918960763,zoom:0};function e(){document.body.removeChild(L("#welcome-screen")),window.removeEventListener("mousedown",e),window.removeEventListener("touchstart",e),n()}function n(){b.mobile&&null==localStorage.getItem("homescreenShown")&&("iOS"==t()||"Android"==t()&&"Android"==t()&&/Chrome/i.test(navigator.userAgent))&&setTimeout(function(){!function(){localStorage.setItem("homescreenShown",!0);var e=L("#home-screen"),n=L("#home-screen .close");e.style.display="block",n.addEventListener("click",function(){e.remove()}),"Android"==t()&&/Chrome/i.test(navigator.userAgent)&&e.classList.add("android")}()},1e4)}function L(e){return document.querySelector(e)}function t(){var e=navigator.userAgent||navigator.vendor||window.opera;return/windows phone/i.test(e)?"Windows Phone":/android/i.test(e)?"Android":/iPad|iPhone|iPod/.test(e)&&!window.MSStream?"iOS":"unknown"}null==localStorage.getItem("welcomeShown")?(L("#welcome-screen").classList.add("show"),localStorage.setItem("welcomeShown",!0),window.addEventListener("mousedown",e),window.addEventListener("touchstart",e)):n(),b.getUrlParameterByName=function(e,n){n=n||window.location.href,e=e.replace(/[\[\]]/g,"\\$&");n=new RegExp("[?&]"+e+"(=([^&#]*)|&|#|$)").exec(n);return n?n[2]?decodeURIComponent(n[2].replace(/\+/g," ")):"":null},b.getCurrentLang=function(){return"fr"==b.getUrlParameterByName("lang")?"fr":"en"},window.addEventListener("load",function(){L("body").classList.add("all-loaded")}),b.domReady=new Promise(function(e){document.addEventListener("DOMContentLoaded",function(){e()})});var P,k={},o={},i={},E={},I={},x={},C=[],z={},B=[];function S(e){return fetch("./Content/"+e+"/"+b.mapId+".json",{credentials:"same-origin"}).then(function(e){return e.json()}).then(function(e){return I=e.layers,k=e.pins,E=e.countries,o=e.background,i=e["countries-background"],[I,k,E].forEach(function(n){Object.keys(n).forEach(function(e){n[e].id=e})}),Object.keys(I).forEach(function(e){I[e].id=e}),Object.keys(E).forEach(function(e){e=E[e];e.background=e.background.map(function(e){return i[e]}).filter(function(e){return e})}),Object.keys(k).forEach(function(e){var n=k[e];n.id=e,n.background=n.background.map(function(e){return o[e]}).filter(function(e){return e}),n.icon="Content/files/"+I[n.layer].pins.unselected,n.selectedIcon="Content/files/"+I[n.layer].pins.selected,n.lat=+n.lat,n.lon=+n.lon}),e})}b.domReady.then(function(){return S(b.initialParameters.lang)}).then(function(e){b.Internationalization.init(e.static);var s=b.Fragment,d=b.Internationalization.t;b.initialParameters.viewer="gmaps",P=new b.Components.ActiveLayerComponent,function(){var e=L("#menu"),n=L("#mobile-menu-icon"),t=L("#mobile-menu-close-icon");function o(){b.mobile&&(n.style.display="block",t.style.display="none",e.classList.remove("open"))}n.addEventListener("click",function(){n.style.display="none",t.style.display="block",e.classList.add("open")}),t.addEventListener("click",o),e.addEventListener("click",o);var i=L("#layer-panel");L("#toggle-layer-panel").addEventListener("click",function(){i.classList.contains("open")?i.classList.remove("open"):i.classList.add("open")})}(),b.mobile&&w(),window.addEventListener("resize",function(){window.innerWidth<767&&!b.mobile&&(b.mobile=!0,w()),767<=window.innerWidth&&b.mobile&&(b.mobile=!1,function(){var e=L("#mobile-menu-icon"),n=L("#mobile-menu-close-icon"),t=L("#active-layer-panel");e.style.display="none",n.style.display="none",t.style.display="none";t=L("#layer-panel > .infopanel");t&&t.parentNode.removeChild(t);var o=L("#panel");Object.keys(I).forEach(function(e){var n=I[e],t=L("#panel .infopanel");e in z&&!t&&(n=new b.Components.PanelInfo(n),z[e].replaceWith(n),(z[e]=n).attach(o))})}())});var e=L("#hide-layers"),o=new b.Components.Panel("#panel");L("#layer-panel");e.addEventListener("click",function(){o.toggle()});var i=L("#active-layer-panel");P.attach(i),Object.keys(I).sort(function(e,n){return+I[e].idx-+I[n].idx}).forEach(function(t){var e=I[t],n=x[t]=new b.Components.LayerComponent(e);n.attach(o.element),n.on("selected",function(){b.mobile&&(L("#layer-panel").classList.remove("open"),B[t]=I[t].title,P.addLayers(B),i.style.display="block"),window.ga("send","event","layer_selection","click",I[t].title,0),s.setParameter("layer-"+t,void 0),Object.keys(x).filter(function(e){return e!==t&&(2<t!=2<e||2<t&&2<e)}).forEach(function(e){x[e].unselect()}),u.addPins(Object.keys(k).filter(function(e){return k[e].layer===t}).map(function(e){return k[e]}));var e=new b.Components.PanelInfo(I[t]),n=L("#panel .infopanel");b.mobile||n||e.attach(o.element),z[t]=e,m("__close__")}),n.on("unselected",function(){b.mobile&&(L("#layer-panel").classList.remove("open"),delete B[t],P.addLayers(B),0==B.filter(Boolean).length&&(i.style.display="none")),s.deleteParameter("layer-"+t),u.clearPins(function(e){return e in k&&k[e].layer===t}),z[t]&&(b.mobile||z[t].dettach(),delete z[t]),m("__close__")}),n.on("info",function(){o.element.classList.remove("expanded"),o.element.parentNode.classList.remove("expanded");var n=L("#layer-panel"),e=new b.Components.PanelInfo(I[t]);e.attach(n),e.on("infoclose",function(){o.element.classList.add("expanded"),o.element.parentNode.classList.add("expanded"),e.element.classList.add("close"),setTimeout(function(){var e=L("#layer-panel .infopanel");n.removeChild(e)},200)})}),"geometries"in e&&(C=C.concat(e.geometries),n.on("selected",function(){e.geometries.forEach(function(e){u.showLayer(e.geojson)})}),n.on("unselected",function(){e.geometries.forEach(function(e){u.hideLayer(e.geojson)})}))});var u,n,t,a=b.Components.h;u=new b.GmapsViewer((n=L("#viewer-container"),t=a("div",{id:"viewer-container"},[a("span",{className:"country-label removed"})]),n?n.parentNode.replaceChild(t,n):document.body.insertBefore(t,document.body.childNodes[0]),t),{mapProvider:b.config.configurations["map-provider"]}),function(){u.on("error",function(e){u.destroy()}),u.watchLoad().then(function(){}),u.on("positionChanged",function(e){var n=s.getParameters(),e=u.currentPosition();n.lat=e.latitude,n.lon=e.longitude,n.zoom=e.zoom,s.saveParameters(n)}),u.on("pinClicked",function(e){m(e)}),u.on("countryClicked",function(e){m(e)});var n=document.querySelector("#country-label");u.on("countryHovered",function(e){x[E[e].layer].selected()&&("Member"===E[e].type?(n.textContent=d("click-to-view-member"),n.classList.remove("removed")):"Partner"===E[e].type&&(n.textContent=d("click-to-view-partner"),n.classList.remove("removed")))}),u.on("countryHoveredStop",function(){n.classList.add("removed")}),u.on("multipleClicked",function(e){m(e)}),u.setGeometry(C),setTimeout(function(){var n=b.initialParameters;Object.keys(I).filter(function(e){return"layer-"+e in n}).forEach(function(e){x[e].select(),B[e]=I[e].title}),"infoBox"in n&&m(n.infoBox),b.mobile&&P.addLayers(B),window.ga("send","pageview","Map Home")},0)}();var f=null,m=function(){var a=b.Components,n=L("#panel-container");function r(e){f?f.replaceWith(e):e.attach(n),(f=e).on("closed",function(){f.element.classList.add("close"),setTimeout(function(){null!=f&&f.dettach(),f=null,s.deleteParameter("infoBox")},200)}),e.on("replaced",function(){f.child&&f.child.element.classList.add("close"),f.element.classList.add("close"),setTimeout(function(){f.child&&f.child.element.classList.remove("close"),f.element.classList.remove("close")},200)})}function o(){var e=d("about-text");"trust-fund"==window.NatoApplication.mapId?e=d("about-text-trust-fund"):"sps"==window.NatoApplication.mapId&&(e=d("about-text-sps")),r(new a.AboutInfoBox("about",{title:d("about"),body:e,toggle:d("terms-conditions")},i)),s.setParameter("infoBox","about")}function i(){r(new a.AboutInfoBox("terms",{title:d("terms-conditions"),body:d("terms-conditions-text"),toggle:d("about")},o)),s.setParameter("infoBox","terms")}function t(e){for(var n in k){var t=k[n];t.type===e.type&&t.lat===e.lat&&t.lon===e.lon&&u.setPinIcon(t.id,t.icon)}}function l(e,n){window.ga("send","event","pin_selection","click",e.title+" - "+e.location,0),function(e){for(var n in k){var t=k[n];t.type===e.type&&t.lat===e.lat&&t.lon===e.lon&&u.setPinIcon(t.id,t.selectedIcon)}}(e);n=new a.FeatureInfoBox(e.id,e,n);n.on("closed",function(){t(e)}),n.on("replaced",function(){t(e)}),u.centerIn({latitude:e.lat,longitude:e.lon}),p(),r(n),s.setParameter("infoBox",e.id)}L("#map-share").addEventListener("click",function(e){e.preventDefault(),r(new a.ShareMapBox(function(){}))},!1);var c=null;return function(e,n){if("__close__"!==e){if("__reload__"===e)return f&&f.close(),c&&m(c);if(c=e,null!==e)if(e instanceof Array){var t=e.map(function(e){return"pin"===e.type&&e.id in k?{id:e.id,name:k[e.id].title}:null}).filter(function(e){return null!==e});if(1<t.length)return function e(n){s.deleteParameter("infoBox");function t(){setTimeout(function(){e(n)},200)}var o=n.filter(function(e){return e.id in k}).map(function(e){return k[e.id]}),i=new a.SelectInfoBox(n,function(e){m(e,t)});i.on("closed",function(){o.forEach(function(e){u.setPinIcon(e.id,e.icon)})}),i.on("replaced",function(){o.forEach(function(e){u.setPinIcon(e.id,e.icon)})}),r(i),o.forEach(function(e){u.setPinIcon(e.id,e.selectedIcon)})}(t);1===t.length&&m(t[0].id)}else f&&f.id===e?f.close():"about"===e?o():"terms"===e?i():e in E?("Member"===(t=E[e]).type?function(e,n){r(new a.MemberInfoBox(e.id,e,n)),s.setParameter("infoBox",e.id)}:function(e,n){r(new a.PartnerInfoBox(e.id,e,n)),s.setParameter("infoBox",e.id)})(t,n):e in k&&l(k[e],n)}else f&&f.close()}}();function p(){u.isMaxZoom()&&(L("#zoom-in-button").disabled=!0),u.isMinZoom()&&(L("#zoom-out-button").disabled=!0)}var r,l=null;function c(e){u.centerIn(l||g,e),p()}function v(){u.setPrinting()}function y(){u.unsetPrinting()}navigator.geolocation.getCurrentPosition(function(e){var n=b.initialParameters;l={latitude:e.coords.latitude,longitude:e.coords.longitude,zoom:0},void 0!==n.lon&&void 0!==n.lat&&void 0!==n.zoom||(u.centerIn(l),p())}),L("#fly-home-button").addEventListener("click",function(e){e.preventDefault(),c()},!1),L("#zoom-in-button").addEventListener("click",function(){this.disabled=!u.zoomIn(),L("#zoom-out-button").disabled=!1},!1),L("#zoom-out-button").addEventListener("click",function(){this.disabled=!u.zoomOut(),L("#zoom-in-button").disabled=!1},!1),L('a[href="#about"]').addEventListener("click",function(e){e.preventDefault(),m("about")},!1),["en","fr"].forEach(function(t){L('a[href="#lang='+t+'"]').addEventListener("click",function(e){e.preventDefault();var n=new b.Components.Modal("Switching to "+("en"===t?"English":"French")+".");n.show(),s.setParameter("lang",t),S(t).then(function(e){b.Internationalization.switchTo(t,e.static)}).then(function(){Object.keys(I).forEach(function(e){var n=I[e];x[e].setText(n.title),e in z&&(n=new b.Components.PanelInfo(n),z[e].replaceWith(n),z[e]=n,B[e]=I[e].title)}),P.addLayers(B),n.dettach()})},!1)}),"onbeforeprint"in window?(window.onbeforeprint=v,window.onafterprint=y):(r=matchMedia("print")).addListener(function(){(r.matches?v:y)()});var h=b.initialParameters;function w(){L("#mobile-menu-icon").style.display="block";var e=L("#panel"),n=L("#panel .infopanel");n&&n.parentNode.removeChild(n),e.classList.add("expanded"),e.parentNode.classList.add("expanded"),B=[];var t=L("#active-layer-panel");Object.keys(I).forEach(function(e){var n=I[e];e in z&&(n=new b.Components.PanelInfo(n),z[e].replaceWith(n),z[e]=n,B[e]=I[e].title,t.style.display="block")}),P.addLayers(B)}["lat","lon","zoom"].every(function(e){return e in h})?(u.centerIn({latitude:+h.lat,longitude:+h.lon,zoom:+h.zoom},{duration:3}),p()):c({duration:3})})}();